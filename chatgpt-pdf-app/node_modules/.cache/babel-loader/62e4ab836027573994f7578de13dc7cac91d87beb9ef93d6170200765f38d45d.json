{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport { Subscription } from '../observable/Subscription';\nimport { Subject } from '../observable/Subject';\nimport { BehaviorSubject } from '../observable/BehaviorSubject';\nexport var RecordingPermission;\n(function (RecordingPermission) {\n  RecordingPermission[\"CAM\"] = \"camera\";\n  RecordingPermission[\"MIC\"] = \"microphone\";\n})(RecordingPermission || (RecordingPermission = {}));\nvar MEDIA_TO_PERMISSION = {\n  audio: RecordingPermission.MIC,\n  video: RecordingPermission.CAM\n};\nvar BrowserPermission = /** @class */function () {\n  function BrowserPermission(_a) {\n    var mediaType = _a.mediaType;\n    this.state = new BehaviorSubject(undefined);\n    this.status = new BehaviorSubject(undefined);\n    this.error = new Subject();\n    this.changeSubscriptions = [];\n    this.name = MEDIA_TO_PERMISSION[mediaType];\n  }\n  Object.defineProperty(BrowserPermission.prototype, \"isWatching\", {\n    get: function () {\n      return this.changeSubscriptions.some(function (subscription) {\n        return !subscription.closed;\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  BrowserPermission.prototype.watch = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var status, handlePermissionChange;\n      var _this = this;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!!this.status.value) return [3 /*break*/, 2];\n            return [4 /*yield*/, this.check()];\n          case 1:\n            _a.sent();\n            if (!this.status.value) return [2 /*return*/];\n            _a.label = 2;\n          case 2:\n            status = this.status.value;\n            handlePermissionChange = function (e) {\n              var state = e.target.state;\n              _this.state.next(state);\n            };\n            status.addEventListener('change', handlePermissionChange);\n            this.changeSubscriptions.push(new Subscription(function () {\n              status.removeEventListener('change', handlePermissionChange);\n            }));\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  BrowserPermission.prototype.unwatch = function () {\n    this.changeSubscriptions.forEach(function (subscription) {\n      return subscription.unsubscribe();\n    });\n  };\n  BrowserPermission.prototype.check = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var permissionState, permissionStatus, e_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (!this.name) {\n              this.error.next(new Error('Unknown media recording permission'));\n              return [2 /*return*/];\n            }\n            _a.label = 1;\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n            return [4 /*yield*/, navigator.permissions.query({\n              name: this.name\n            })];\n          case 2:\n            permissionStatus = _a.sent();\n            permissionState = permissionStatus.state;\n            this.status.next(permissionStatus);\n            return [3 /*break*/, 4];\n          case 3:\n            e_1 = _a.sent();\n            // permission does not exist - cannot be queried\n            // an example would be Firefox - camera, neither microphone perms can be queried\n            permissionState = 'granted';\n            return [3 /*break*/, 4];\n          case 4:\n            this.state.next(permissionState);\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  return BrowserPermission;\n}();\nexport { BrowserPermission };","map":{"version":3,"names":["__awaiter","__generator","Subscription","Subject","BehaviorSubject","RecordingPermission","MEDIA_TO_PERMISSION","audio","MIC","video","CAM","BrowserPermission","_a","mediaType","state","undefined","status","error","changeSubscriptions","name","Object","defineProperty","prototype","get","some","subscription","closed","enumerable","configurable","watch","handlePermissionChange","_this","label","value","check","sent","e","target","next","addEventListener","push","removeEventListener","unwatch","forEach","unsubscribe","permissionState","permissionStatus","e_1","Error","trys","navigator","permissions","query"],"sources":["C:/Users/Aniket/Desktop/MS/NCSU/Subjects/Infinitus/chatgpt-pdf-app/node_modules/stream-chat-react/dist/components/MediaRecorder/classes/BrowserPermission.js"],"sourcesContent":["import { __awaiter, __generator } from \"tslib\";\nimport { Subscription } from '../observable/Subscription';\nimport { Subject } from '../observable/Subject';\nimport { BehaviorSubject } from '../observable/BehaviorSubject';\nexport var RecordingPermission;\n(function (RecordingPermission) {\n    RecordingPermission[\"CAM\"] = \"camera\";\n    RecordingPermission[\"MIC\"] = \"microphone\";\n})(RecordingPermission || (RecordingPermission = {}));\nvar MEDIA_TO_PERMISSION = {\n    audio: RecordingPermission.MIC,\n    video: RecordingPermission.CAM,\n};\nvar BrowserPermission = /** @class */ (function () {\n    function BrowserPermission(_a) {\n        var mediaType = _a.mediaType;\n        this.state = new BehaviorSubject(undefined);\n        this.status = new BehaviorSubject(undefined);\n        this.error = new Subject();\n        this.changeSubscriptions = [];\n        this.name = MEDIA_TO_PERMISSION[mediaType];\n    }\n    Object.defineProperty(BrowserPermission.prototype, \"isWatching\", {\n        get: function () {\n            return this.changeSubscriptions.some(function (subscription) { return !subscription.closed; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BrowserPermission.prototype.watch = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var status, handlePermissionChange;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.status.value) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.check()];\n                    case 1:\n                        _a.sent();\n                        if (!this.status.value)\n                            return [2 /*return*/];\n                        _a.label = 2;\n                    case 2:\n                        status = this.status.value;\n                        handlePermissionChange = function (e) {\n                            var state = e.target.state;\n                            _this.state.next(state);\n                        };\n                        status.addEventListener('change', handlePermissionChange);\n                        this.changeSubscriptions.push(new Subscription(function () {\n                            status.removeEventListener('change', handlePermissionChange);\n                        }));\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserPermission.prototype.unwatch = function () {\n        this.changeSubscriptions.forEach(function (subscription) { return subscription.unsubscribe(); });\n    };\n    BrowserPermission.prototype.check = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var permissionState, permissionStatus, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.name) {\n                            this.error.next(new Error('Unknown media recording permission'));\n                            return [2 /*return*/];\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, navigator.permissions.query({\n                                name: this.name,\n                            })];\n                    case 2:\n                        permissionStatus = _a.sent();\n                        permissionState = permissionStatus.state;\n                        this.status.next(permissionStatus);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        // permission does not exist - cannot be queried\n                        // an example would be Firefox - camera, neither microphone perms can be queried\n                        permissionState = 'granted';\n                        return [3 /*break*/, 4];\n                    case 4:\n                        this.state.next(permissionState);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return BrowserPermission;\n}());\nexport { BrowserPermission };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}