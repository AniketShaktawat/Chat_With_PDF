{"ast":null,"code":"import { __assign } from \"tslib\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { resampleWaveformData } from '../audioSampling';\nexport var WaveProgressBar = function (_a) {\n  var _b = _a.amplitudesCount,\n    amplitudesCount = _b === void 0 ? 40 : _b,\n    _c = _a.progress,\n    progress = _c === void 0 ? 0 : _c,\n    seek = _a.seek,\n    waveformData = _a.waveformData;\n  var _d = useState(null),\n    progressIndicator = _d[0],\n    setProgressIndicator = _d[1];\n  var isDragging = useRef(false);\n  var rootRef = useRef(null);\n  var handleDragStart = function (e) {\n    e.preventDefault();\n    if (!progressIndicator) return;\n    isDragging.current = true;\n    progressIndicator.style.cursor = 'grabbing';\n  };\n  var handleDrag = function (e) {\n    if (!isDragging.current) return;\n    // Due to throttling of seek, it is necessary to create a copy (snapshot) of the event.\n    // Otherwise, the event would be nullified at the point when the throttled function is executed.\n    seek(__assign({}, e));\n  };\n  var handleDragStop = useCallback(function () {\n    if (!progressIndicator) return;\n    isDragging.current = false;\n    progressIndicator.style.removeProperty('cursor');\n  }, [progressIndicator]);\n  var resampledWaveformData = useMemo(function () {\n    return resampleWaveformData(waveformData, amplitudesCount);\n  }, [amplitudesCount, waveformData]);\n  useEffect(function () {\n    document.addEventListener('pointerup', handleDragStop);\n    return function () {\n      document.removeEventListener('pointerup', handleDragStop);\n    };\n  }, [handleDragStop]);\n  if (!waveformData.length) return null;\n  return React.createElement(\"div\", {\n    className: 'str-chat__wave-progress-bar__track',\n    \"data-testid\": 'wave-progress-bar-track',\n    onClick: seek,\n    onPointerDown: handleDragStart,\n    onPointerMove: handleDrag,\n    onPointerUp: handleDragStop,\n    ref: rootRef,\n    role: 'progressbar'\n  }, resampledWaveformData.map(function (amplitude, i) {\n    var _a;\n    return React.createElement(\"div\", {\n      className: clsx('str-chat__wave-progress-bar__amplitude-bar', (_a = {}, _a['str-chat__wave-progress-bar__amplitude-bar--active'] = progress > i / resampledWaveformData.length * 100, _a)),\n      \"data-testid\": 'amplitude-bar',\n      key: \"amplitude-\".concat(i),\n      style: {\n        '--str-chat__wave-progress-bar__amplitude-bar-height': amplitude ? amplitude * 100 + '%' : '0%'\n      }\n    });\n  }), React.createElement(\"div\", {\n    className: 'str-chat__wave-progress-bar__progress-indicator',\n    \"data-testid\": 'wave-progress-bar-progress-indicator',\n    ref: setProgressIndicator,\n    style: {\n      left: \"\".concat(progress < 0 ? 0 : progress > 100 ? 100 : progress, \"%\")\n    }\n  }));\n};","map":{"version":3,"names":["__assign","React","useCallback","useEffect","useMemo","useRef","useState","clsx","resampleWaveformData","WaveProgressBar","_a","_b","amplitudesCount","_c","progress","seek","waveformData","_d","progressIndicator","setProgressIndicator","isDragging","rootRef","handleDragStart","e","preventDefault","current","style","cursor","handleDrag","handleDragStop","removeProperty","resampledWaveformData","document","addEventListener","removeEventListener","length","createElement","className","onClick","onPointerDown","onPointerMove","onPointerUp","ref","role","map","amplitude","i","key","concat","left"],"sources":["C:/Users/Aniket/Desktop/MS/NCSU/Subjects/Infinitus/chatgpt-pdf-app/node_modules/stream-chat-react/dist/components/Attachment/components/WaveProgressBar.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState, } from 'react';\nimport clsx from 'clsx';\nimport { resampleWaveformData } from '../audioSampling';\nexport var WaveProgressBar = function (_a) {\n    var _b = _a.amplitudesCount, amplitudesCount = _b === void 0 ? 40 : _b, _c = _a.progress, progress = _c === void 0 ? 0 : _c, seek = _a.seek, waveformData = _a.waveformData;\n    var _d = useState(null), progressIndicator = _d[0], setProgressIndicator = _d[1];\n    var isDragging = useRef(false);\n    var rootRef = useRef(null);\n    var handleDragStart = function (e) {\n        e.preventDefault();\n        if (!progressIndicator)\n            return;\n        isDragging.current = true;\n        progressIndicator.style.cursor = 'grabbing';\n    };\n    var handleDrag = function (e) {\n        if (!isDragging.current)\n            return;\n        // Due to throttling of seek, it is necessary to create a copy (snapshot) of the event.\n        // Otherwise, the event would be nullified at the point when the throttled function is executed.\n        seek(__assign({}, e));\n    };\n    var handleDragStop = useCallback(function () {\n        if (!progressIndicator)\n            return;\n        isDragging.current = false;\n        progressIndicator.style.removeProperty('cursor');\n    }, [progressIndicator]);\n    var resampledWaveformData = useMemo(function () { return resampleWaveformData(waveformData, amplitudesCount); }, [\n        amplitudesCount,\n        waveformData,\n    ]);\n    useEffect(function () {\n        document.addEventListener('pointerup', handleDragStop);\n        return function () {\n            document.removeEventListener('pointerup', handleDragStop);\n        };\n    }, [handleDragStop]);\n    if (!waveformData.length)\n        return null;\n    return (React.createElement(\"div\", { className: 'str-chat__wave-progress-bar__track', \"data-testid\": 'wave-progress-bar-track', onClick: seek, onPointerDown: handleDragStart, onPointerMove: handleDrag, onPointerUp: handleDragStop, ref: rootRef, role: 'progressbar' },\n        resampledWaveformData.map(function (amplitude, i) {\n            var _a;\n            return (React.createElement(\"div\", { className: clsx('str-chat__wave-progress-bar__amplitude-bar', (_a = {},\n                    _a['str-chat__wave-progress-bar__amplitude-bar--active'] = progress > (i / resampledWaveformData.length) * 100,\n                    _a)), \"data-testid\": 'amplitude-bar', key: \"amplitude-\".concat(i), style: {\n                    '--str-chat__wave-progress-bar__amplitude-bar-height': amplitude\n                        ? amplitude * 100 + '%'\n                        : '0%',\n                } }));\n        }),\n        React.createElement(\"div\", { className: 'str-chat__wave-progress-bar__progress-indicator', \"data-testid\": 'wave-progress-bar-progress-indicator', ref: setProgressIndicator, style: { left: \"\".concat(progress < 0 ? 0 : progress > 100 ? 100 : progress, \"%\") } })));\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}